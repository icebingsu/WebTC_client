(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[187],{477:()=>{},1719:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var a=r(2109),s=r.n(a);async function n(){let e=localStorage.getItem("user");if(!e)return!1;try{let t=s().AES.decrypt(e,"icebingsu365").toString(s().enc.Utf8),r=JSON.parse(t);if(console.log(r),!(null==r?void 0:r.username)||!(null==r?void 0:r.password))return!1;let a=await fetch("".concat("https://webtc-cv5w.onrender.com","/users?username=").concat(r.username,"&password=").concat(r.password)),n=await a.json();return Array.isArray(n)&&n.length>0}catch(e){return console.error("Lỗi x\xe1c minh người d\xf9ng:",e),localStorage.clear(),!1}}},2727:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),s=r(2115);function n(e){let{desc:t=""}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.current;if(e){let t=0,r=()=>{t+=1,e.style.transform="rotate(".concat(t,"deg)"),requestAnimationFrame(r)};r()}},[]),(0,a.jsxs)("div",{className:"flex justify-center items-center p-10 flex-col w-full ",children:[(0,a.jsx)("div",{ref:r,className:" border-8 border-t-8 border-blue-500 border-solid rounded-full w-16 h-16",children:(0,a.jsx)("div",{className:"absolute inset-0 m-auto w-10 h-10 border-4 border-solid border-t-transparent border-r-transparent border-b-transparent border-l-blue-500 rounded-full animate-spin"})}),t&&(0,a.jsx)("div",{className:"mt-4 text-center",children:t})]})}},3705:(e,t,r)=>{Promise.resolve().then(r.bind(r,3724))},3724:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(2115),n=r(3081),d=r(8008),o=r(3568);function i(e){let{setUsers:t}=e,[r,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)({authenticate:!0,username:"",password:""}),u=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},h=async()=>{try{if((await fetch("".concat("https://webtc-cv5w.onrender.com","/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok){let e=await fetch("".concat("https://webtc-cv5w.onrender.com","/users")),r=await e.json();t(r),o.Ay.success("Th\xeam t\xe0i khoản th\xe0nh c\xf4ng!",{duration:2e3}),i(!1)}else o.Ay.error("Th\xeam t\xe0i khoản thất bại!",{duration:2e3})}catch(e){console.error("Lỗi khi gọi API:",e),o.Ay.error("C\xf3 lỗi xảy ra khi th\xeam t\xe0i khoản!",{duration:2e3})}};return(0,a.jsxs)(d.Lt,{open:r,onOpenChange:i,children:[(0,a.jsx)(d.tv,{asChild:!0,children:(0,a.jsx)("div",{className:"border border-green-600 text-green-600 mt-5 dark:text-green-400 dark:border-green-500 font-medium md:px-4 md:py-1 px-2 py-2 rounded hover:bg-green-50 dark:hover:bg-green-900/10 transition cursor-pointer inline-flex items-center",role:"button",tabIndex:0,children:(0,a.jsx)(n.A,{size:20})})}),(0,a.jsxs)(d.EO,{children:[(0,a.jsxs)(d.wd,{children:[(0,a.jsx)(d.r7,{children:"Th\xeam t\xe0i khoản người d\xf9ng"}),(0,a.jsx)(d.$v,{children:"Vui l\xf2ng nhập th\xf4ng tin t\xe0i khoản mới."})]}),(0,a.jsxs)("div",{className:"space-y-4 max-h-[300px] overflow-y-auto p-3",children:[(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:l.username,onChange:u,className:"mt-1 p-2 w-full border rounded-md",placeholder:"T\xean đăng nhập..."}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:l.password,onChange:u,className:"mt-1 p-2 w-full border rounded-md",placeholder:"Mật khẩu..."})]}),(0,a.jsxs)(d.ck,{children:[(0,a.jsx)(d.Zr,{onClick:()=>i(!1),children:"Hủy"}),(0,a.jsx)(d.Rx,{onClick:h,children:"Lưu"})]})]})]})}var l=r(2525);function c(e){let{profile:t,onDeleted:r}=e,[n,i]=(0,s.useState)(""),c=async()=>{if(n!==t.password)return void o.Ay.error("Nhập đ\xfang mật khẩu để x\xf3a!",{duration:2e3});try{(await fetch("".concat("https://webtc-cv5w.onrender.com","/users/").concat(t.id),{method:"DELETE"})).ok?(o.Ay.success("X\xf3a th\xe0nh c\xf4ng ".concat(t.username),{duration:2e3}),void 0!==t.id&&(null==r||r(t.id))):o.Ay.error("X\xf3a thất bại lỗi 404!",{duration:1e3})}catch(e){console.error("Lỗi khi gọi API:",e)}};return(0,a.jsxs)(d.Lt,{children:[(0,a.jsx)(d.tv,{asChild:!0,children:(0,a.jsx)("div",{className:"border border-red-600 text-red-600 dark:text-red-500 dark:border-red-500 font-medium md:px-4 md:py-1 px-2 py-2 rounded hover:bg-red-50 dark:hover:bg-red-900/10 transition cursor-pointer inline-flex items-center",role:"button",tabIndex:0,children:(0,a.jsx)(l.A,{size:16})})}),(0,a.jsxs)(d.EO,{children:[(0,a.jsxs)(d.wd,{children:[(0,a.jsxs)(d.r7,{children:["X\xf3a ",t.username,"?"]}),(0,a.jsxs)(d.$v,{children:["Nhập mật khẩu để x\xe1c nhận x\xf3a t\xe0i khoản ",(0,a.jsx)("b",{children:t.username}),".",(0,a.jsx)("span",{className:"py-2",children:(0,a.jsx)("input",{type:"password",placeholder:"Nhập mật khẩu x\xe1c nhận",className:"w-full border rounded px-3 py-2 mt-2",value:n,onChange:e=>i(e.target.value)})})]})]}),(0,a.jsxs)(d.ck,{children:[(0,a.jsx)(d.Zr,{children:"Hủy"}),(0,a.jsx)(d.Rx,{onClick:c,children:"Tiếp tục"})]})]})]})}var u=r(3717);function h(e){let{profile:t,onUpdated:r}=e,[n,i]=(0,s.useState)({...t,password:""}),[l,c]=(0,s.useState)(""),h=async()=>{if(!l)return void o.Ay.error("Vui l\xf2ng nhập mật khẩu cũ");try{let e=await fetch("".concat("https://webtc-cv5w.onrender.com","/users?password=").concat(l)),a=await e.json();if(!a||a.length<1)return void o.Ay.error("Mật khẩu cũ kh\xf4ng đ\xfang");let s={...t,...n,password:n.password||l};(await fetch("".concat("https://webtc-cv5w.onrender.com","/users/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(o.Ay.success("Cập nhật th\xe0nh c\xf4ng"),null==r||r(s)):o.Ay.error("Cập nhật thất bại!")}catch(e){console.error("Lỗi khi cập nhật:",e),o.Ay.error("Đ\xe3 xảy ra lỗi khi cập nhật!")}};return(0,a.jsxs)(d.Lt,{children:[(0,a.jsx)(d.tv,{asChild:!0,children:(0,a.jsx)("div",{className:"border border-blue-600 text-blue-600 dark:text-blue-500 dark:border-blue-500 font-medium md:px-4 md:py-1 px-2 py-2 rounded hover:bg-blue-50 dark:hover:bg-blue-900/10 transition cursor-pointer inline-flex items-center",role:"button",tabIndex:0,children:(0,a.jsx)(u.A,{size:16})})}),(0,a.jsxs)(d.EO,{className:"max-w-md mx-auto p-4",children:[(0,a.jsxs)(d.wd,{children:[(0,a.jsx)(d.r7,{children:"Chỉnh sửa th\xf4ng tin người d\xf9ng"}),(0,a.jsx)(d.$v,{children:"Bạn cần x\xe1c minh mật khẩu cũ để lưu thay đổi."})]}),(0,a.jsxs)("div",{className:"space-y-4 max-h-[300px] overflow-y-auto p-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"T\xe0i khoản"}),(0,a.jsx)("input",{type:"text",name:"username",value:n.username,onChange:e=>{let{name:t,value:r}=e.target;i(e=>({...e,[t]:r}))},className:"p-2 w-full border rounded-md"}),(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Mật khẩu mới"}),(0,a.jsx)("input",{type:"password",value:n.password,onChange:e=>{let{value:t}=e.target;i(e=>({...e,password:t}))},className:"p-2 w-full border rounded-md",placeholder:"Nhập mật khẩu mới (nếu muốn đổi)"}),(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Mật khẩu cũ"}),(0,a.jsx)("input",{type:"password",value:l,onChange:e=>c(e.target.value),className:"p-2 w-full border rounded-md",placeholder:"Nhập mật khẩu hiện tại"})]}),(0,a.jsxs)(d.ck,{className:"space-x-2",children:[(0,a.jsx)(d.Zr,{children:"Hủy"}),(0,a.jsx)(d.Rx,{onClick:h,children:"Lưu thay đổi"})]})]})]})}var x=r(1719),m=r(2727);function p(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{fetch("".concat("https://webtc-cv5w.onrender.com","/users")).then(e=>e.json()).then(e=>t(e)).catch(e=>console.error(e))},[]);let d=e=>{t(t=>t.filter(t=>t.id!==e))},o=e=>{t(t=>t.map(t=>t.id===e.id?e:t))};return(0,s.useEffect)(()=>{(async()=>{n(!0),await (0,x.g)()?n(!0):(n(!1),window.location.href="/tra-cuu-khach-hang")})()},[]),(0,a.jsx)("div",{className:"py-10 px-3.5 md:px-0 ",children:r?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("caption",{className:"p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800",children:["Quản l\xfd người d\xf9ng",(0,a.jsxs)("p",{className:"mt-1 text-sm font-normal text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("b",{children:"Th\xeam"})," ",(0,a.jsx)("b",{children:"x\xf3a"})," ",(0,a.jsx)("b",{children:"sửa"})," t\xe0i khoản người d\xf9ng"]}),(0,a.jsx)(i,{setUsers:t})]}),(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"T\xean đăng nhập"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Mật khẩu"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-right",children:"H\xe0nh động"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 border-gray-200",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:e.username}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.active?e.password:"********"}),(0,a.jsx)("td",{className:"px-6 py-4 text-right flex justify-end gap-3 whitespace-nowrap",children:e.active?"Kh\xf4ng chỉnh sửa":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{profile:e,onDeleted:d}),(0,a.jsx)(h,{profile:e,onUpdated:o})]})})]},t))})]})})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.A,{})})})}},8008:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>l,Rx:()=>b,Zr:()=>v,EO:()=>x,$v:()=>f,ck:()=>p,wd:()=>m,r7:()=>g,tv:()=>c});var a=r(5155);r(2115);var s=r(7372),n=r(2596),d=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.QP)((0,n.$)(t))}let i=(0,r(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{...t}=e;return(0,a.jsx)(s.bL,{"data-slot":"alert-dialog",...t})}function c(e){let{...t}=e;return(0,a.jsx)(s.l9,{"data-slot":"alert-dialog-trigger",...t})}function u(e){let{...t}=e;return(0,a.jsx)(s.ZL,{"data-slot":"alert-dialog-portal",...t})}function h(e){let{className:t,...r}=e;return(0,a.jsx)(s.hJ,{"data-slot":"alert-dialog-overlay",className:o("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function x(e){let{className:t,...r}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{}),(0,a.jsx)(s.UC,{"data-slot":"alert-dialog-content",className:o("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r})]})}function m(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:o("flex flex-col gap-2 text-center sm:text-left",t),...r})}function p(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:o("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...r})}function g(e){let{className:t,...r}=e;return(0,a.jsx)(s.hE,{"data-slot":"alert-dialog-title",className:o("text-lg font-semibold",t),...r})}function f(e){let{className:t,...r}=e;return(0,a.jsx)(s.VY,{"data-slot":"alert-dialog-description",className:o("text-muted-foreground text-sm",t),...r})}function b(e){let{className:t,...r}=e;return(0,a.jsx)(s.rc,{className:o(i(),t),...r})}function v(e){let{className:t,...r}=e;return(0,a.jsx)(s.ZD,{className:o(i({variant:"outline"}),t),...r})}}},e=>{var t=t=>e(e.s=t);e.O(0,[568,109,344,441,684,358],()=>t(3705)),_N_E=e.O()}]);